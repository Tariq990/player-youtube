# ========================================
# Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
# Ø§Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ø£ÙˆØ§Ù…Ø± ÙˆØ§Ù„ØµÙ‚Ù‡Ø§ ÙÙŠ Ù†Ø§ÙØ°Ø© SSH
# ========================================

# 1. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù…
sudo apt update && sudo apt upgrade -y

# 2. Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙˆØ¯Ø¹ Python
sudo add-apt-repository ppa:deadsnakes/ppa -y
sudo apt update

# 3. ØªØ«Ø¨ÙŠØª Python 3.13
sudo apt install -y python3.13 python3.13-venv python3-pip

# 4. ØªØ«Ø¨ÙŠØª Brave Browser
sudo curl -fsSLo /usr/share/keyrings/brave-browser-archive-keyring.gpg https://brave-browser-apt-release.s3.brave.com/brave-browser-archive-keyring.gpg
echo "deb [signed-by=/usr/share/keyrings/brave-browser-archive-keyring.gpg] https://brave-browser-apt-release.s3.brave.com/ stable main" | sudo tee /etc/apt/sources.list.d/brave-browser-release.list
sudo apt update
sudo apt install -y brave-browser

# 5. ØªØ«Ø¨ÙŠØª Xvfb ÙˆØ§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
sudo apt install -y xvfb fonts-liberation libnss3 libxss1 libasound2 libatk1.0-0 libatk-bridge2.0-0 libcups2 libdrm2 libxkbcommon0 libxcomposite1 libxdamage1 libxrandr2 libgbm1 libpango-1.0-0 libcairo2

# 6. Ø§Ø³ØªÙ†Ø³Ø§Ø®/ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† GitHub
cd ~
if [ -d "player-youtube" ]; then
    echo "ğŸ“‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…ÙˆØ¬ÙˆØ¯ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«..."
    cd player-youtube
    git pull origin main
else
    echo "ğŸ“¥ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹..."
    git clone https://github.com/Tariq990/player-youtube.git
    cd player-youtube
fi

# 7. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
python3.13 -m venv venv
source venv/bin/activate

# 8. ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
pip install --upgrade pip
pip install -r requirements.txt

# ========================================
# âœ… Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯!
# ========================================
# Ø§Ù„Ø¢Ù†:
# 1. Ø§Ø±ÙØ¹ Ù…Ù„Ù cookies.json: Ø´ØºÙ‘Ù„ 2_upload_cookies.bat Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ (Windows)
# 2. Ø¨Ø¹Ø¯ Ø±ÙØ¹ Ø§Ù„ÙƒÙˆÙƒÙŠØ²ØŒ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¯Ø§Ø¦Ù…Ø© (24/7):
#    Ø§Ù†Ø³Ø® Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ù…Ù†: setup_systemd_service.txt
# ========================================
